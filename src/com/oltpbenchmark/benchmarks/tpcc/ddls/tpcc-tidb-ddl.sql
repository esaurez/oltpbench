DROP TABLE IF EXISTS WAREHOUSE2;
DROP TABLE IF EXISTS DISTRICT2;
DROP TABLE IF EXISTS CUSTOMER2;
DROP TABLE IF EXISTS HISTORY2;
DROP TABLE IF EXISTS OORDER2;
DROP TABLE IF EXISTS NEW_ORDER2;
DROP TABLE IF EXISTS ITEM2;
DROP TABLE IF EXISTS STOCK2;
DROP TABLE IF EXISTS ORDER_LINE2;

CREATE TABLE WAREHOUSE2 (
  W_ID INT NOT NULL,
  W_YTD DECIMAL(12,2),
  W_TAX DECIMAL(4,4),
  W_NAME VARCHAR(10),
  W_STREET_1 VARCHAR(20),
  W_STREET_2 VARCHAR(20),
  W_CITY VARCHAR(20),
  W_STATE CHAR(2),
  W_ZIP CHAR(9),
  CONSTRAINT PK_WAREHOUSE2 PRIMARY KEY (W_ID)
);

CREATE TABLE DISTRICT2 (
  D_W_ID INT NOT NULL,
  D_ID INT NOT NULL,
  D_YTD DECIMAL(12,2),
  D_TAX DECIMAL(4,4),
  D_NEXT_O_ID INT,
  D_NAME VARCHAR(10),
  D_STREET_1 VARCHAR(20),
  D_STREET_2 VARCHAR(20),
  D_CITY VARCHAR(20),
  D_STATE CHAR(2),
  D_ZIP CHAR(9),
  CONSTRAINT PK_DISTRICT2 PRIMARY KEY (D_W_ID,D_ID),
  FOREIGN KEY FKEY_DISTRICT2_1 (D_W_ID) REFERENCES WAREHOUSE2(W_ID)
);

CREATE TABLE CUSTOMER2 (
  C_W_ID INT NOT NULL,
  C_D_ID INT NOT NULL,
  C_ID INT NOT NULL,
  C_DISCOUNT DECIMAL(4,4) NOT NULL,
  C_CREDIT CHAR(2) NOT NULL,
  C_LAST VARCHAR(16) NOT NULL,
  C_FIRST VARCHAR(16) NOT NULL,
  C_CREDIT_LIM DECIMAL(12,2) NOT NULL,
  C_BALANCE DECIMAL(12,2) NOT NULL,
  C_YTD_PAYMENT FLOAT NOT NULL,
  C_PAYMENT_CNT INT NOT NULL,
  C_DELIVERY_CNT INT NOT NULL,
  C_STREET_1 VARCHAR(20) NOT NULL,
  C_STREET_2 VARCHAR(20) NOT NULL,
  C_CITY VARCHAR(20) NOT NULL,
  C_STATE CHAR(2) NOT NULL,
  C_ZIP CHAR(9) NOT NULL,
  C_PHONE CHAR(16) NOT NULL,
  C_SINCE TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  C_MIDDLE CHAR(2) NOT NULL,
  C_DATA VARCHAR(500) NOT NULL,
  CONSTRAINT PK_CUSTOMER2 PRIMARY KEY (C_W_ID,C_D_ID,C_ID),
  KEY IDX_CUSTOMER2_NAME (C_W_ID,C_D_ID,C_LAST,C_FIRST),
  FOREIGN KEY FKEY_CUSTOMER2_1 (C_W_ID,C_D_ID) REFERENCES DISTRICT2(D_W_ID,D_ID)
);

CREATE TABLE HISTORY2 (
  H_C_ID INT NOT NULL,
  H_C_D_ID INT NOT NULL,
  H_C_W_ID INT NOT NULL,
  H_D_ID INT NOT NULL,
  H_W_ID INT NOT NULL,
  H_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  H_AMOUNT DECIMAL(6,2),
  H_DATA VARCHAR(24),
  FOREIGN KEY FKEY_HISTORY2_1 (H_C_W_ID,H_C_D_ID,H_C_ID) REFERENCES CUSTOMER2(C_W_ID,C_D_ID,C_ID),
  FOREIGN KEY FKEY_HISTORY2_2 (H_W_ID,H_D_ID) REFERENCES DISTRICT2(D_W_ID,D_ID)
);

CREATE TABLE OORDER2 (
  O_W_ID INT NOT NULL,
  O_D_ID INT NOT NULL,
  O_ID INT NOT NULL,
  O_C_ID INT NOT NULL,
  O_CARRIER_ID INT DEFAULT NULL,
  O_OL_CNT DECIMAL(2,0),
  O_ALL_LOCAL DECIMAL(1,0),
  O_ENTRY_D TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT PK_OORDER2 PRIMARY KEY (O_W_ID,O_D_ID,O_ID),
  KEY IDX_ORDER (O_W_ID,O_D_ID,O_C_ID,O_ID),
  CONSTRAINT OORDER2_IDX1 UNIQUE (O_W_ID,O_D_ID,O_C_ID,O_ID),
  FOREIGN KEY FKEY_ORDER_1 (O_W_ID,O_D_ID,O_C_ID) REFERENCES CUSTOMER2(C_W_ID,C_D_ID,C_ID)
);

CREATE TABLE NEW_ORDER2 (
  NO_W_ID INT NOT NULL,
  NO_D_ID INT NOT NULL,
  NO_O_ID INT NOT NULL,
  CONSTRAINT PK_NEW_ORDER2 PRIMARY KEY (NO_W_ID,NO_D_ID,NO_O_ID),
  FOREIGN KEY FKEY_NEW_ORDER2_1 (NO_W_ID,NO_D_ID,NO_O_ID) REFERENCES OORDER2(O_W_ID,O_D_ID,O_ID)
);

CREATE TABLE ITEM2 (
  I_ID INT NOT NULL,
  I_NAME VARCHAR(24),
  I_PRICE DECIMAL(5,2),
  I_DATA VARCHAR(50),
  I_IM_ID INT,
  CONSTRAINT PK_ITEM2 PRIMARY KEY (I_ID)
);

CREATE TABLE STOCK2 (
  S_W_ID INT NOT NULL,
  S_I_ID INT NOT NULL,
  S_QUANTITY DECIMAL(4,0),
  S_YTD DECIMAL(8,2),
  S_ORDER_CNT INT,
  S_REMOTE_CNT INT,
  S_DATA VARCHAR(50),
  S_DIST_01 CHAR(24),
  S_DIST_02 CHAR(24),
  S_DIST_03 CHAR(24),
  S_DIST_04 CHAR(24),
  S_DIST_05 CHAR(24),
  S_DIST_06 CHAR(24),
  S_DIST_07 CHAR(24),
  S_DIST_08 CHAR(24),
  S_DIST_09 CHAR(24),
  S_DIST_10 CHAR(24),
  CONSTRAINT PK_STOCK2 PRIMARY KEY (S_W_ID,S_I_ID),
  FOREIGN KEY FKEY_STOCK2_1 (S_W_ID) REFERENCES WAREHOUSE2(W_ID),
  FOREIGN KEY FKEY_STOCK2_2 (S_I_ID) REFERENCES ITEM2(I_ID)
);

CREATE TABLE ORDER_LINE2 (
  OL_W_ID INT NOT NULL,
  OL_D_ID INT NOT NULL,
  OL_O_ID INT NOT NULL,
  OL_NUMBER INT NOT NULL,
  OL_I_ID INT NOT NULL,
  OL_DELIVERY_D TIMESTAMP NULL DEFAULT NULL,
  OL_AMOUNT DECIMAL(6,2),
  OL_SUPPLY_W_ID INT NOT NULL,
  OL_QUANTITY DECIMAL(2,0),
  OL_DIST_INFO CHAR(24),
  CONSTRAINT PK_ORDER_LINE2 PRIMARY KEY (OL_W_ID,OL_D_ID,OL_O_ID,OL_NUMBER),
  FOREIGN KEY FKEY_ORDER_LINE2_1 (OL_W_ID,OL_D_ID,OL_O_ID) REFERENCES OORDER2(O_W_ID,O_D_ID,O_ID),
  FOREIGN KEY FKEY_ORDER_LINE2_2 (OL_SUPPLY_W_ID,OL_I_ID) REFERENCES STOCK2(S_W_ID,S_I_ID)
);
